<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition 
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	template="/layout/template.xhtml">

	<ui:define name="metadata">
		<f:metadata>
			<f:validateBean disabled="#{true}">
				<f:viewParam name="firstResult" value="#{estadoList.firstResult}" />
				<f:viewParam name="sort" value="#{estadoList.orderColumn}" />
				<f:viewParam name="dir" value="#{estadoList.orderDirection}" />
				<f:viewParam name="logic" value="#{estadoList.restrictionLogicOperator}" />

				<f:viewParam name="from" />
				<f:viewParam name="rolId" />
				<f:viewParam name="estadoId" value="#{estadoList.estado.id}" />
				<f:viewParam name="name" value="#{estadoList.estado.nombreEstado}" />
			</f:validateBean>
		</f:metadata>
	</ui:define>
	
	<ui:define name="body">

		<h:form id="EstadoSearch" styleClass="edit">

			<rich:collapsiblePanel header="Filtro de b&uacute;squeda de estados" switchType="client">
				<f:validateBean disabled="#{true}">
					<ui:decorate template="/layout/display.xhtml">
						<ui:define name="label">Identificador</ui:define>
						<h:inputText id="estadoId" value="#{estadoList.estado.id}">
							<f:validateBean disabled="#{true}" />
						</h:inputText>
					</ui:decorate>
	
					<ui:decorate template="/layout/display.xhtml">
						<ui:define name="label">Nombre estado</ui:define>
						<h:inputText id="nombreEstado" value="#{estadoList.estado.nombreEstado}">
							<f:validateBean disabled="#{true}" />
						</h:inputText>
					</ui:decorate>
					
					<ui:decorate template="/layout/display.xhtml">
						<ui:define name="label">Coincidencia</ui:define>
						<h:selectOneRadio id="logic" value="#{estadoList.restrictionLogicOperator}" styleClass="radio">
							<f:selectItem itemLabel="Todos los criterios especificados" itemValue="and" />
							<f:selectItem itemLabel="Alguno de los criterios especificados" itemValue="or" />
						</h:selectOneRadio>
					</ui:decorate>
				</f:validateBean>
			</rich:collapsiblePanel>

			<div class="actionButtons">
				<h:commandButton type="submit" id="search" value="Buscar" />
				<h:button onclick="showWaitDialog();" id="reset" value="Reiniciar B&uacute;squeda" includeViewParams="false" rendered="#{empty from}"/>
				<h:button onclick="showWaitDialog();" id="return" value="Regresar" rendered="#{not empty from}" outcome="#{from}" includeViewParams="true" />
			</div>

		</h:form>

		<rich:panel>
		
			<f:facet name="header">Resultados de b&uacute;squeda de estados (#{empty estadoList.resultList ? 0 : (estadoList.paginated ? estadoList.resultCount : estadoList.resultList.size)})</f:facet>
			<div class="results" id="estadoListSearchResult">

				<h:outputText value="La b&uacute;squeda de estados no retorn&oacute; resultados." rendered="#{empty estadoList.resultList}" />
				
				<rich:dataScroller renderIfSinglePage="false" for="estadoList" maxPages="5" id="dataScroller1" reRender="dataScroller2" rendered="#{not empty estadoList.resultList}"/>
				
				<rich:dataTable rows="10" style="width:100%" id="estadoList" var="_estadoList" rowClasses="rvgRowOne,rvgRowTwo"  value="#{estadoList.resultList}" rendered="#{not empty estadoList.resultList}">
					
					<h:column>
						<f:facet name="header">
							<ui:include src="/layout/sort.xhtml">
								<ui:param name="entityList" value="#{estadoList}" />
								<ui:param name="propertyLabel" value="Identificador" />
								<ui:param name="propertyPath" value="estado.id" />
							</ui:include>
						</f:facet>
						<h:outputText value="#{_estadoList.id}" />
					</h:column>
					
					<h:column>
						<f:facet name="header">
							<ui:include src="/layout/sort.xhtml">
								<ui:param name="entityList" value="#{estadoList}" />
								<ui:param name="propertyLabel" value="Estado" />
								<ui:param name="propertyPath" value="estado.nombreEstado" />
							</ui:include>
						</f:facet>
						<h:outputText value="#{_estadoList.nombreEstado}" />
					</h:column>
					
					<rich:column styleClass="action">
						
						<f:facet name="header">Acci&oacute;n</f:facet>
            
						<h:link outcome="#{empty from ? 'Estado' : from}" id="estadoViewId" includeViewParams="true">
							<f:param name="estadoId" value="#{_estadoList.id}"/>
							<f:param name="estadoIdOperation" value="insert"/>
							<f:param name="rolId" value="#{rolId}"/>
							<h:graphicImage value="#{empty from ? '/img/view.png' : '/img/link.png'}" alt="#{empty from ? 'Ver' : 'Seleccionar'}" />
							<rich:tooltip styleClass="tooltip" layout="block" value="#{empty from ? 'Ver' : 'Seleccionar'}" target="estadoViewId"/>
						</h:link>
						
						<h:link outcome="EstadoEdit" id="estadoEdit" rendered="#{empty from}" includeViewParams="true" >
							<f:param name="estadoId" value="#{_estadoList.id}"/>
							<h:graphicImage value="/img/pencil.png" alt="Editar"/>
							<rich:tooltip styleClass="tooltip" layout="block" value="Editar" target="estadoEdit"/>
						</h:link>
						
					</rich:column>
					
				</rich:dataTable>
				
				<rich:dataScroller renderIfSinglePage="false" for="estadoList" maxPages="5" id="dataScroller2" reRender="dataScroller1" rendered="#{not empty estadoList.resultList}"/>

			</div>
		</rich:panel>
		
		<h:panelGroup styleClass="actionButtons" rendered="#{empty from}">
			<h:button outcome="EstadoEdit" id="create" value="Crear estado">
				<f:param name="estadoId" />
			</h:button>
		</h:panelGroup>

	</ui:define>

</ui:composition>
